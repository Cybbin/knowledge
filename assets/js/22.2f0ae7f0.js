(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{380:function(v,_,e){"use strict";e.r(_);var o=e(43),t=Object(o.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token"}},[v._v("#")]),v._v(" Token")]),v._v(" "),e("h2",{attrs:{id:"过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过程"}},[v._v("#")]),v._v(" 过程")]),v._v(" "),e("ol",[e("li",[v._v("客户端使用用户名跟密码请求登录;")]),v._v(" "),e("li",[v._v("服务端验证通过后，生成一个 "),e("code",[v._v("Token")]),v._v(" ，发送给客户端；")]),v._v(" "),e("li",[v._v("客户端收到 "),e("code",[v._v("Token")]),v._v(" 后，存储在 "),e("code",[v._v("Cookie")]),v._v(" 或 "),e("code",[v._v("LocalStorage")]),v._v(" 或 "),e("code",[v._v("SessionStorage")]),v._v(" 里。")]),v._v(" "),e("li",[v._v("客户端之后的每一次请求，通过 "),e("code",[v._v("request header")]),v._v(" 的 "),e("code",[v._v("Authorization")])]),v._v(" "),e("li",[v._v("服务端通过这个 "),e("code",[v._v("Token")]),v._v("，从而知道用户的身份。")])]),v._v(" "),e("h2",{attrs:{id:"优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[v._v("#")]),v._v(" 优点")]),v._v(" "),e("p",[v._v("不需要在服务端去保留用户的认证信息，解决 "),e("code",[v._v("Session")]),v._v(" 拓展性的的弊端。")]),v._v(" "),e("h2",{attrs:{id:"缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[v._v("#")]),v._v(" 缺点")]),v._v(" "),e("ol",[e("li",[v._v("占带宽："),e("code",[v._v("Token")]),v._v(" 通常比 "),e("code",[v._v("SESSIONID")]),v._v(" 大，需要消耗更多流量，挤占更多带宽（不过可以忽略不计）；")]),v._v(" "),e("li",[v._v("性能问题： 相比于 "),e("code",[v._v("session-cookie")]),v._v("，需要服务端花费更多的时间和性能来对 "),e("code",[v._v("Token")]),v._v(" 进行解密验证。")])]),v._v(" "),e("h2",{attrs:{id:"token-与-session-的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-与-session-的区别"}},[v._v("#")]),v._v(" Token 与 Session 的区别")]),v._v(" "),e("ol",[e("li",[v._v("使用 "),e("code",[v._v("Token")]),v._v("，服务端不需要保留状态，有更好的拓展性；")]),v._v(" "),e("li",[e("code",[v._v("Token")]),v._v(" 不需要借助 "),e("code",[v._v("Cookie")]),v._v("，可以预防 "),e("code",[v._v("CSRF")]),v._v("；")]),v._v(" "),e("li",[e("code",[v._v("SESSIONID")]),v._v(" 是在登陆的时候生成的而且在登出时一直不变的，在一定程度上安全就会低，而 "),e("code",[v._v("Token")]),v._v("是可以在一段时间内动态改变的。")])]),v._v(" "),e("h2",{attrs:{id:"jwt"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt"}},[v._v("#")]),v._v(" JWT")]),v._v(" "),e("p",[v._v("全称 "),e("code",[v._v("JSON Web Token")]),v._v("，基于 "),e("code",[v._v("Token")]),v._v(" 的一种解决方案。")]),v._v(" "),e("p",[e("code",[v._v("JWT")]),v._v(" 的原理是，服务器认证后，生成一个 "),e("code",[v._v("JSON")]),v._v(" 对象，经过服务器签名加密后返回给用户，以后用户每次请求都带着这个令牌。")]),v._v(" "),e("p",[e("code",[v._v("JWT")]),v._v(" 由三部分构成："),e("code",[v._v("Header")]),v._v("（头部）、"),e("code",[v._v("Payload")]),v._v("（负载）、"),e("code",[v._v("Signature")]),v._v("（签名）。")]),v._v(" "),e("h3",{attrs:{id:"jwt-特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt-特点"}},[v._v("#")]),v._v(" JWT 特点")]),v._v(" "),e("ol",[e("li",[v._v("在服务端通过密钥加密生成签名 "),e("code",[v._v("Signature")]),v._v("；")]),v._v(" "),e("li",[v._v("不能将秘密数据写进未加密的 "),e("code",[v._v("JWT")]),v._v(" 中；")]),v._v(" "),e("li",[v._v("降低服务器查询数据库的次数；")]),v._v(" "),e("li",[e("code",[v._v("JWT")]),v._v(" 包含认证信息，一旦泄露，任何人都可以获得该令牌的所有权限；")]),v._v(" "),e("li",[v._v("为了减少盗用，"),e("code",[v._v("JWT")]),v._v(" 不应该使用 "),e("code",[v._v("HTTP")]),v._v(" 协议明码传输，要使用 "),e("code",[v._v("HTTPS")]),v._v(" 协议传输。")])]),v._v(" "),e("h2",{attrs:{id:"token-和-jwt-的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-和-jwt-的区别"}},[v._v("#")]),v._v(" Token 和 JWT 的区别")]),v._v(" "),e("p",[v._v("相同点：")]),v._v(" "),e("ul",[e("li",[v._v("都是访问资源的令牌")]),v._v(" "),e("li",[v._v("都是记录用户的信息")]),v._v(" "),e("li",[v._v("使服务端无状态化，将凭证存放在客户端")])]),v._v(" "),e("p",[v._v("区别：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("Token")]),v._v(" 服务器收到凭证后，需要查库获取用户信息，从而验证 "),e("code",[v._v("Token")]),v._v(" 是否有效；")]),v._v(" "),e("li",[e("code",[v._v("JWT")]),v._v(" 将 "),e("code",[v._v("Header")]),v._v(" 和 "),e("code",[v._v("Payload")]),v._v(" 通过秘钥加密生成凭证，服务端只需要根据秘钥解密校验即可，不需要查库或少查库，因为 "),e("code",[v._v("JWT")]),v._v(" 自带用户信息和加密的数据。")])])])}),[],!1,null,null,null);_.default=t.exports}}]);